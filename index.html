<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"  crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="static/css/chat_interface.css">
    <link rel="stylesheet" type="text/css" href="static/css/article.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans:300|Open+Sans:300|Oxygen|Material+Icons" rel="stylesheet">
	<title>Chatbot FrontendS</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>
    <div class="container">
    <br/>
    <div class="row">
        <div class="col-md-8">
            <div class="chat_window">
                <div class="top_menu">
                    <div class="title" id="title"> NERO: Enquero AI Assistant ðŸ¤˜ </div>
                </div>
                <ul class="messages"></ul>
                <div class="bottom_wrapper clearfix">
                    <div class="message_input_wrapper">
                        <input id="msg_input" class="message_input" placeholder="Say Hi to begin chat..." />
                    </div>
                    <div class="send_message">
                        <div class="icon">
                            <div class="text" style="color:black">Send</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="message_template">
                <li class="message">
                    <div class="avatar m_avatar"></div>
                    <div class="text_wrapper">
                        <div class="text"></div>
                        <div class="timestamp"></div>
                    </div>
                </li>
            </div>
            <br />
            <br />
        </div>
       <!--- <div class="col-md-4">
            <div class="chat_window" style="background-color: white">
                <div class="top_menu">
                    <div class="title">Help</div>
                </div>
                <div class="panel-group" id="accordion">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">Sample Help text</a>
                            </h4>
                        </div>
                        <div id="collapseOne" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <p>Try saying, </p>
                                <ul>
                                    <li>Do something</li>
                                    <li>hello</li>
                                    <li>What is your name?</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseTen">Lorem ipsum</a>
                            </h4>
                        </div>
                        <div id="collapseTen" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <p>Try saying, </p>
                                <ul>
                                <li>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur</li>
                                <li>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum</li>
                            </div>
                        </div>
                    </div>
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseEleven">Lorem ipsum</a>
                            </h4>
                        </div>
                        <div id="collapseEleven" class="panel-collapse collapse in">
                            <div class="panel-body">
                                Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-left: 20px"><a href="/button_link" class="btn btn-info custom-button-width .navbar-right logout" role="button">Button</a></div>
            </div>
        </div>
    </div> -->
</body>

<footer>
  <script type="text/javascript">
    $( document ).ready(function() {
        console.log( "ready!" );
         $('.message_input').val('');
         $('.message_input').focus();
         
         var welcomeMsg = "";
         if(!localStorage.getItem("firstname")){
             welcomeMsg = "Hi! This is NERO, your personal digital assistant for anything and everything related to Enquero"
              showUserMessage(welcomeMsg,getCurrentTimestamp());
          AskFNameLNameMsg = "Please provide your First-name and Last-name\n example: Ajit Verma"
          showUserMessage(AskFNameLNameMsg,getCurrentTimestamp());
         } else {
            welcomeMsg = "Hi " + localStorage.getItem("firstname")+ " " + localStorage.getItem("lastname") + " ! My name is NERO and I'm a Chatbot. I can help you with Enquero related queries. Please select a quick link below or type your question in the space provided."
          showUserMessage(welcomeMsg,getCurrentTimestamp());
         }
         
        $('.send_message').click(function(){
              var msg = $('.message_input').val();
              // showUserMessage(msg, getCurrentTimestamp());
              var fullname = msg.split(' ');
              // alert(fullname);
              // if not loggedIn
             if(!localStorage.getItem("firstname")){
                 console.log("not loggedIn")
                $.get("https://nero-enquero.herokuapp.com/validuser?firstname="+fullname[0]+"&lastname="+fullname[1], function(data, status){
                // alert("Data: " + data + "\nStatus: " + status);
                if(data.result){
                     localStorage.setItem("firstname", fullname[0]);
                     localStorage.setItem("lastname", fullname[1]);
                      welcomeMsg = "Hi " + localStorage.getItem("firstname")+ " " + localStorage.getItem("lastname") + " ! My name is NERO and I'm a Chatbot. I can help you with Enquero related queries. Please select a quick link below or type your question in the space provided."
                    showUserMessage(welcomeMsg,getCurrentTimestamp());
                } else {
                    // not found user in db
                      console.log("not loggedIn not found user in db")
                    showBotMessage(data,getCurrentTimestamp());
                }
                 $('.message_input').val('');
                 $('.message_input').focus();
               
                });
            } else {
                    // if loggedIn
                    console.log("loggedIn firstname="+localStorage.getItem("firstname")+"&lastname="+localStorage.getItem("lastname"))
                   
                    $.get("https://nero-enquero.herokuapp.com/api/v1/ask-nero?query="+ msg + "&firstname="+localStorage.getItem("firstname")+"&lastname="+localStorage.getItem("lastname") , function(data, status){
                        // alert("Data: " + data + "\nStatus: " + status);
                        // showUserMessage("Hi Manav, I am Nero, What can i do for you?",getCurrentTimestamp());
                    
                        var res = data.replace("#emp_name", "manav");
                        showBotMessage(res,getCurrentTimestamp());
                        $('.message_input').val('');
                        $('.message_input').focus();
                    
                    });
            }
           
            
           
        });
    });
  </script>
      <script src="static/js/main.js"></script>
</footer>
</html>
